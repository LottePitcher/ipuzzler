{"version":3,"sources":["webpack://webpax/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://webpax/webpack/bootstrap","webpack://webpax/webpack/runtime/compat get default export","webpack://webpax/webpack/runtime/define property getters","webpack://webpax/webpack/runtime/global","webpack://webpax/webpack/runtime/hasOwnProperty shorthand","webpack://webpax/webpack/runtime/publicPath","webpack://webpax/./src/ipuzzler.js","webpack://webpax/./src/ipuzzler.scss"],"names":["module","exports","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","o","get","g","globalThis","this","Function","e","window","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","Error","replace","p","Clue","ipuzClueData","direction","toLowerCase","text","clue","number","enumeration","label","root","next","continuations","cells","toClueList","_","concat","toListItem","html","li","createElement","innerHTML","highlight","depth","forEach","cell","focusFirstInput","focus","focusFinalInput","Cell","x","y","ipuzCellData","position","span","className","previous","clues","style","barred","parseInt","insertAdjacentHTML","input","setAttribute","appendChild","isEndOfRange","test","classList","add","clearHighlight","remove","clear","Puzzle","container","changeDirection","listCells","puzzle","drawClues","heading","div","ul","drawPuzzle","ipuz","map","row","ipuzCell","parseCells","cluesFromAcross","Across","c","parse","flat","cluesFromDown","Down","across","down","find","findCluePosition","push","parseClues","grid","layout","addEventListener","handleKeyPress","handleKeyDown","handleFocus","handleClick","gridTemplate","dimensions","height","width","innerWidth","handleWindowResize","findCluesForInput","clearHighlights","moveFocusToNextCell","event","target","moveFocusToPreviousCell","clearInput","callback","keyHandlers","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","Backspace","Delete","Escape","blur","handler","focusing","console","log","setTimeout","preventDefault","toUpperCase","tagName","gridSize","getComputedStyle","fontSize","Math","ceil","querySelectorAll","clueFontSize","w","query","ipuzClue","continued","i","ipuzzler","selector","querySelector","load","url","success","failure","error","request","XMLHttpRequest","open","onload","data","status","JSON","responseText","send","search","split","token","pair"],"mappings":"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","file":"ipuzzler.js","sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","(function () {\r\n\r\n    function Clue(ipuzClueData, direction) {\r\n        this.direction = (direction || ipuzClueData.direction || \"\").toLowerCase();\r\n        if (ipuzClueData) {\r\n            this.text = ipuzClueData.clue || \"\";\r\n            this.number = ipuzClueData.number || 0;\r\n            this.enumeration = (ipuzClueData.enumeration || \"\").replace(/ /g, ',');\r\n            this.label = ipuzClueData.label || this.number;\r\n        }\r\n        this.root = null;\r\n        this.next = null;\r\n        this.continuations = [];\r\n        this.cells = [];\r\n        this.toClueList = _ => [this].concat(this.continuations);\r\n\r\n        this.toListItem = function () {\r\n            let html = `<a href=\"#\"><label>${this.label}</label>${this.text}`;\r\n            if (this.enumeration) html += ` <span>(${this.enumeration})</span>`;\r\n            html += \"</a>\";\r\n            const li = document.createElement('li');\r\n            li.innerHTML = html;\r\n            return (li);\r\n        }\r\n\r\n        this.highlight = function (depth = 0) {\r\n            if (depth == 0 && this.root) {\r\n                return this.root.highlight(depth + 1);\r\n            } else {\r\n                this.cells.forEach(cell => cell.highlight());\r\n                this.continuations.forEach(clue => clue.highlight(depth + 1));\r\n            }\r\n        }\r\n\r\n        this.focusFirstInput = function () {\r\n            this.cells[0].focus();\r\n        }\r\n\r\n        this.focusFinalInput = function () {\r\n            this.cells[this.cells.length - 1].focus();\r\n        }\r\n    }\r\n\r\n    Clue.parse = function (ipuzClue, direction) {\r\n        var clue = new Clue(ipuzClue, direction);\r\n        if (ipuzClue.continued && ipuzClue.continued.map) {\r\n            clue.continuations = ipuzClue.continued.map(c => ({ ...Clue.parse(c), text: `See ${ipuzClue.number}`, root: clue }));\r\n            clue.next = clue.continuations[0];\r\n            for (var i = 0; i < clue.continuations.length - 1; i++) clue.continuations[i].next = clue.continuations[i + 1];\r\n        }\r\n        return clue;\r\n    }\r\n\r\n    function Cell(x, y, ipuzCellData) {\r\n        this.position = { x: x, y: y };\r\n        this.span = document.createElement('span');\r\n        this.span.className = 'cell';\r\n        this.previous = {};\r\n        this.next = {};\r\n        this.clues = [];\r\n        if (ipuzCellData === null) {\r\n            this.span.className += \" null\";\r\n        } else {\r\n            this.style = ipuzCellData.style || {};\r\n            if (ipuzCellData.style && ipuzCellData.style.barred) this.span.className += ' barred-' + ipuzCellData.style.barred.toLowerCase();\r\n            this.value = (ipuzCellData.cell || ipuzCellData);\r\n            if (parseInt(this.value)) this.span.insertAdjacentHTML('afterbegin', `<span class=\"clue-number\">${this.value}</span>`);\r\n            if (this.value == '#') {\r\n                this.span.className += \" block\";\r\n            } else {\r\n                this.input = document.createElement('input');\r\n                this.input.setAttribute('maxlength', '1');\r\n                this.input.cell = this;\r\n                this.span.appendChild(this.input);\r\n            }\r\n        }\r\n\r\n        this.isEndOfRange = function (direction) {\r\n            if (!this.input) return (true);\r\n            if (this.previous[direction]) {\r\n                if (direction == \"across\" && /L/i.test(this.style.barred)) return true;\r\n                if (direction == \"down\" && /T/i.test(this.style.barred)) return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        this.highlight = () => this.span.classList.add('current-clue');\r\n        this.clearHighlight = () => this.span.classList.remove('current-clue');\r\n        this.focus = () => this.input.focus();\r\n        this.clear = () => this.input.value = \"\";\r\n    }\r\n\r\n    function Puzzle(container) {\r\n\r\n        this.direction = \"across\";\r\n\r\n        this.changeDirection = function (direction) {\r\n            if (direction) {\r\n                this.direction = direction;\r\n            } else {\r\n                this.direction = (this.direction == \"across\" ? \"down\" : \"across\");\r\n            }\r\n        }\r\n\r\n        const parseCells = (ipuz) => ipuz.puzzle.map((row, y) => row.map((ipuzCell, x) => new Cell(x, y, ipuzCell)));\r\n\r\n        const findCluePosition = function (clue) {\r\n            return puzzle.cells.flat().find(cell => cell.value == clue.number).position;\r\n        }\r\n\r\n        const parseClues = function (ipuz) {\r\n            let cluesFromAcross = ipuz.clues.Across.map(c => Clue.parse(c, \"across\").toClueList()).flat();\r\n            let cluesFromDown = ipuz.clues.Down.map(c => Clue.parse(c, \"down\").toClueList()).flat();\r\n            const clues = { across: [], down: [] };\r\n            cluesFromAcross.concat(cluesFromDown).forEach(clue => {\r\n                clue.position = findCluePosition(clue);\r\n                clue.cells = listCells(clue.position.x, clue.position.y, clue.direction);\r\n                clue.cells.forEach(cell => cell.clues.push(clue));\r\n                clues[clue.direction][clue.number] = clue;\r\n            });\r\n            return clues;\r\n        }\r\n\r\n        const listCells = function (x, y, direction, previous) {\r\n            if (y < 0 || x < 0 || y >= puzzle.cells.length || x >= puzzle.cells[y].length) return [];\r\n            var cell = puzzle.cells[y][x];\r\n            cell.previous[direction] = previous;\r\n            if (cell.isEndOfRange(direction)) return [];\r\n            if (cell.value == \"#\") return [];\r\n            if (previous) previous.next[direction] = cell;\r\n            (direction == \"across\" ? x++ : y++);\r\n            return ([cell].concat(listCells(x, y, direction, cell)));\r\n        }\r\n\r\n        function drawGrid(cells) {\r\n            const grid = document.createElement('div');\r\n            grid.className = 'puzzle-grid';\r\n            cells.forEach(row => row.forEach(cell => grid.appendChild(cell.span)));\r\n            return (grid);\r\n        }\r\n\r\n        function drawClues(heading, clues) {\r\n            let div = document.createElement('div');\r\n            div.innerHTML = `<h2>${heading}</h2>`;\r\n            let ul = document.createElement(ul);\r\n            clues.forEach(clue => ul.appendChild(clue.toListItem()));\r\n            div.appendChild(ul);\r\n            return div;\r\n        }\r\n\r\n        this.drawPuzzle = function (ipuz) {\r\n            this.cells = parseCells(ipuz);\r\n            this.clues = parseClues(ipuz);\r\n            const layout = document.createElement('div');\r\n            layout.className = \"puzzle-layout\";\r\n            this.grid = drawGrid(this.cells);\r\n            layout.appendChild(this.grid);\r\n            layout.appendChild(drawClues(\"Across\", this.clues.across));\r\n            layout.appendChild(drawClues(\"Down\", this.clues.down));\r\n            container.appendChild(layout);\r\n\r\n            container.addEventListener(\"keypress\", this.handleKeyPress);\r\n            container.addEventListener(\"keydown\", this.handleKeyDown);\r\n            container.addEventListener(\"focusin\", this.handleFocus);\r\n            container.addEventListener(\"click\", this.handleClick);\r\n\r\n            this.grid.style.gridTemplate = `repeat(${ipuz.dimensions.height}, 1fr) / repeat(${ipuz.dimensions.width}, 1fr)`;\r\n            if (window.innerWidth > 768) {\r\n                this.grid.style.width = (ipuz.dimensions.width * 32) + \"px\";\r\n                this.grid.style.height = (ipuz.dimensions.height * 32) + \"px\";\r\n            }\r\n            this.handleWindowResize();\r\n        }\r\n\r\n        let puzzle = this;\r\n\r\n        this.findCluesForInput = function (input, direction) {\r\n            let cell = puzzle.cells.flat().find(cell => cell.input === input);\r\n            return cell.clues;\r\n        }\r\n\r\n        this.clearHighlights = function () {\r\n            puzzle.cells.flat().forEach(cell => cell.clearHighlight());\r\n        }\r\n\r\n        this.moveFocusToNextCell = function (direction = puzzle.direction) {\r\n            return (function (event) {\r\n                let cell = event.target.cell;\r\n                if (cell.next && cell.next[direction]) {\r\n                    puzzle.changeDirection(direction);\r\n                    cell.next[direction].focus();\r\n                } else {\r\n                    var clues = puzzle.findCluesForInput(event.target);\r\n                    var clue = clues.find(c => c.direction == direction);\r\n                    if (clue && clue.next) {\r\n                        puzzle.changeDirection(clue.next.direction);\r\n                        clue.next.focusFirstInput();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        this.moveFocusToPreviousCell = function (direction) {\r\n            return (function (event) {\r\n                direction ||= puzzle.direction;\r\n                var cell = event.target.cell;\r\n                if (cell.previous && cell.previous[direction]) {\r\n                    puzzle.changeDirection(direction);\r\n                    cell.previous[direction].focus();\r\n                }\r\n            });\r\n        }\r\n\r\n        this.focusFirstInput = function (event) {\r\n            let clues = puzzle.findCluesForInput(event.target);\r\n            let clue = clues.find(clue => clue.direction == puzzle.direction);\r\n            clue.focusFirstInput();\r\n        }\r\n\r\n        this.focusFinalInput = function (event) {\r\n            let clues = puzzle.findCluesForInput(event.target);\r\n            let clue = clues.find(clue => clue.direction == puzzle.direction);\r\n            clue.focusFinalInput();\r\n        }\r\n\r\n        this.clearInput = function (callback) {\r\n            return event => {\r\n                event.target.cell.clear();\r\n                if (callback) callback(event);\r\n            };\r\n        }\r\n\r\n        this.keyHandlers = {\r\n            ArrowUp: this.moveFocusToPreviousCell(\"down\"),\r\n            ArrowDown: this.moveFocusToNextCell(\"down\"),\r\n            ArrowLeft: this.moveFocusToPreviousCell(\"across\"),\r\n            ArrowRight: this.moveFocusToNextCell(\"across\"),\r\n            Home: this.focusFirstInput,\r\n            End: this.focusFinalInput,\r\n            Backspace: this.clearInput(this.moveFocusToPreviousCell()),\r\n            Delete: this.clearInput,\r\n            Escape: event => event.target.blur()\r\n        }\r\n\r\n        this.handleKeyDown = function (event) {\r\n            var handler = puzzle.keyHandlers[event.key];\r\n            if (handler) return handler(event);\r\n        }\r\n\r\n        this.handleFocus = function (event) {\r\n            window.focusing = true;\r\n            puzzle.clearHighlights();\r\n            let clues = puzzle.findCluesForInput(event.target);\r\n            console.log(\"handleFocus\");\r\n            console.log(puzzle.direction);\r\n            let clue = clues.find(clue => clue.direction == puzzle.direction);\r\n            if (!clue) {\r\n                puzzle.changeDirection();\r\n                clue = clues.find(clue => clue.direction == puzzle.direction);\r\n            }\r\n            clue.highlight();\r\n            console.log(puzzle.direction);\r\n            window.setTimeout(() => window.focusing = false, 200);\r\n        }\r\n\r\n\r\n        this.handleKeyPress = function (event) {\r\n            event.preventDefault();\r\n            console.log(event);\r\n            if (/^[A-Z]$/i.test(event.key)) {\r\n                event.target.value = event.key.toUpperCase();\r\n                //TODO: this is horrible...\r\n                puzzle.moveFocusToNextCell()(event);\r\n            }\r\n            return (false);\r\n        }\r\n\r\n        this.handleClick = function (event) {\r\n            if (window.focusing || event.target.tagName != \"INPUT\") return;\r\n            let clues = puzzle.findCluesForInput(event.target);\r\n            if (clues.length > 1) puzzle.changeDirection();\r\n            puzzle.clearHighlights();\r\n            clues.find(clue => clue.direction == puzzle.direction).highlight();\r\n        }\r\n\r\n        this.handleWindowResize = function (event) {\r\n            if (!puzzle.grid) return;\r\n            let gridSize = parseInt(getComputedStyle(puzzle.grid, null).width.replace(\"px\", \"\"));\r\n            let fontSize = Math.ceil(gridSize / (2 * puzzle.cells[0].length));\r\n\r\n            // for sizes just under 16, we bump the size to 16px to prevent zooming on iOS when input is focused.\r\n            if (fontSize > 10 && fontSize < 16) fontSize = 16;\r\n            puzzle.grid.querySelectorAll(\"input\").forEach(input => input.style.fontSize = fontSize + \"px\");\r\n\r\n            let clueFontSize = (Math.ceil(gridSize / (3.5 * puzzle.cells[0].length)));\r\n            puzzle.grid.querySelectorAll(\"span.clue-number\").forEach(input => input.style.fontSize = clueFontSize + \"px\");\r\n        }\r\n\r\n        window.addEventListener(\"resize\", this.handleWindowResize);\r\n    }\r\n\r\n    function get(url, success, failure, error) {\r\n        var request = new XMLHttpRequest();\r\n        request.open('GET', url, true);\r\n        request.onload = function () {\r\n            if (request.status >= 200 && request.status < 400) {\r\n                success(JSON.parse(request.responseText));\r\n            } else {\r\n                if (failure) failure();\r\n            }\r\n        };\r\n        request.send();\r\n    }\r\n\r\n    let ipuzzler = function (selector) {\r\n        let puzzle = new Puzzle(document.querySelector(selector));\r\n        this.load = function (url) {\r\n            get(url, function (data) {\r\n                puzzle.drawPuzzle(data);\r\n            });\r\n        }\r\n        return (this);\r\n    }\r\n\r\n    window.ipuzzler = ipuzzler;\r\n\r\n    (function (w) {\r\n        let query = {};\r\n        let tokens = window.location.search.replace(/^\\?/, '').split('&');\r\n        tokens.forEach(token => {\r\n            let pair = token.split('=');\r\n            query[pair[0]] = pair[1];\r\n        });\r\n        w.query = query;\r\n    })(window);\r\n\r\n})();","export default __webpack_public_path__ + \"ipuzzler.css\";"],"sourceRoot":""}
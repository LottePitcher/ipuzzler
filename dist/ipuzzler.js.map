{"version":3,"sources":["webpack://webpax/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://webpax/webpack/bootstrap","webpack://webpax/webpack/runtime/compat get default export","webpack://webpax/webpack/runtime/define property getters","webpack://webpax/webpack/runtime/global","webpack://webpax/webpack/runtime/hasOwnProperty shorthand","webpack://webpax/webpack/runtime/publicPath","webpack://webpax/./src/ipuzzler.js","webpack://webpax/./src/ipuzzler.scss"],"names":["module","exports","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","o","get","g","globalThis","this","Function","e","window","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","Error","replace","p","Clue","ipuzClueData","direction","toLowerCase","text","clue","number","enumeration","label","root","next","continuations","cells","toClueList","_","concat","toListItem","html","li","createElement","innerHTML","Cell","x","y","ipuzCellData","span","className","style","barred","cell","parseInt","insertAdjacentHTML","input","setAttribute","appendChild","Puzzle","container","drawClues","div","ul","puzzle","clues","forEach","drawPuzzle","data","ipuz","cluesFromAcross","Across","map","c","parse","flat","cluesFromDown","Down","across","down","parseClues","row","ipuzCell","parseCells","grid","layout","w","query","ipuzClue","continued","i","ipuzzler","selector","querySelector","load","url","success","failure","error","request","XMLHttpRequest","open","onload","status","JSON","responseText","send","search","split","token","pair","console","log"],"mappings":"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","file":"ipuzzler.js","sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","(function () {\r\n\r\n    function Clue(ipuzClueData, direction) {\r\n        this.direction = (direction || ipuzClueData.direction || \"\").toLowerCase();\r\n        if (ipuzClueData) {\r\n            this.text = ipuzClueData.clue || \"\";\r\n            this.number = ipuzClueData.number || 0;\r\n            this.enumeration = (ipuzClueData.enumeration || \"\").replace(/ /g, ',');\r\n            this.label = ipuzClueData.label || this.number;\r\n        }\r\n        this.root = null;\r\n        this.next = null;\r\n        this.continuations = [];\r\n        this.cells = [];\r\n        this.toClueList = _ =>  [this].concat(this.continuations);\r\n        \r\n        this.toListItem = function () {\r\n            let html = `<a href=\"#\"><label>${this.label}</label>${this.text}`;\r\n            if (this.enumeration) html += ` <span>(${this.enumeration})</span>`;\r\n            html += \"</a>\";\r\n            const li = document.createElement('li');\r\n            li.innerHTML = html;\r\n            return (li);\r\n        }\r\n    }\r\n\r\n    Clue.parse = function(ipuzClue, direction) {\r\n        var clue = new Clue(ipuzClue, direction);\r\n        if (ipuzClue.continued && ipuzClue.continued.map) {\r\n            clue.continuations = ipuzClue.continued.map(c => ({ ...Clue.parse(c), text: `See ${ipuzClue.number}`, root: clue }));\r\n            for(var i = 0; i < clue.continuations.length-1; i++) clue.continuations[i].next = clue.continuations[i+1];\r\n        }\r\n        return clue;\r\n    }    \r\n\r\n    function Cell(x, y, ipuzCellData) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.span = document.createElement('span');\r\n        this.span.className = 'cell';\r\n        if (ipuzCellData.style && ipuzCellData.style.barred) this.span.className += 'barred-' + ipuzCellData.style.barred.toLowerCase();\r\n        this.value = (ipuzCellData.cell || ipuzCellData);\r\n        if (parseInt(this.value)) this.span.insertAdjacentHTML('afterbegin', `<span class=\"clue-number\">${this.value}</span>`);\r\n        if (this.value == '#') {\r\n            this.span.className += \" block\";\r\n        } else {\r\n            this.input = document.createElement('input');\r\n            this.input.setAttribute('maxlength', '1');\r\n            this.input.cell = this;\r\n            this.span.appendChild(this.input);\r\n        }\r\n        // this.style = ipuzCellData.style || {};\r\n    }\r\n\r\n    function Puzzle(container) {\r\n\r\n        function parseCells(ipuz) {\r\n            let cells = [];\r\n            ipuz.puzzle.forEach((row, y) => row.forEach((ipuzCell, x) => {\r\n                if (! cells[y].length) cells[y] = [];\r\n                cells[y][x] = new Cell(x, y, ipuzCell);\r\n            }));\r\n            return(cells);\r\n        }\r\n\r\n        function parseClues(ipuz) {\r\n            let cluesFromAcross = ipuz.clues.Across.map(c => Clue.parse(c, \"across\").toClueList()).flat();\r\n            let cluesFromDown = ipuz.clues.Down.map(c => Clue.parse(c, \"across\").toClueList()).flat();\r\n            const clues = { across: [], down: [] };\r\n            cluesFromAcross.concat(cluesFromDown).forEach(clue =>  clues[clue.direction][clue.number] = clue);\r\n            return clues;\r\n        }\r\n\r\n        function drawGrid() {\r\n            const grid = document.createElement('div');\r\n            grid.className = 'puzzle-grid';\r\n            puzzle.cells.forEach(row => row.forEach(cell => grid.appendChild(cell.span)));\r\n            return (grid);\r\n        }\r\n\r\n        function drawClues(direction) {\r\n            let div = document.createElement('div');\r\n            div.innerHTML = `<h2>${direction}</h2>`;\r\n            let ul = document.createElement(ul);\r\n            puzzle.clues[direction].forEach(clue => ul.appendChild(clue.toListItem()));\r\n            div.appendChild(ul);\r\n            return div;\r\n        }\r\n\r\n        this.drawPuzzle = function (data) {\r\n            this.clues = parseClues(ipuz);\r\n            this.cells = parseCells(ipuz);\r\n            const layout = document.createElement('div');\r\n            layout.className = \"puzzle-layout\";\r\n            layout.appendChild(drawGrid());\r\n            layout.appendChild(drawClues(\"across\"));\r\n            layout.appendChild(drawClues(\"down\"));\r\n            container.appendChild(layout);\r\n        }\r\n    }\r\n\r\n    function get(url, success, failure, error) {\r\n        var request = new XMLHttpRequest();\r\n        request.open('GET', url, true);\r\n        request.onload = function () {\r\n            if (request.status >= 200 && request.status < 400) {\r\n                success(JSON.parse(request.responseText));\r\n            } else {\r\n                if (failure) failure();\r\n            }\r\n        };\r\n        request.send();\r\n    }\r\n\r\n    let ipuzzler = function (selector) {\r\n        let puzzle = new Puzzle(document.querySelector(selector));\r\n        this.load = function (url) {\r\n            get(url, function (data) {\r\n                puzzle.drawPuzzle(data);\r\n            });\r\n        }\r\n        return (this);\r\n    }\r\n\r\n    window.ipuzzler = ipuzzler;\r\n\r\n    (function (w) {\r\n        let query = {};\r\n        let tokens = window.location.search.replace(/^\\?/, '').split('&');\r\n        tokens.forEach(token => {\r\n            let pair = token.split('=');\r\n            console.log(token);\r\n            query[pair[0]] = pair[1];\r\n        });\r\n        w.query = query;\r\n    })(window);\r\n\r\n})();","export default __webpack_public_path__ + \"ipuzzler.css\";"],"sourceRoot":""}
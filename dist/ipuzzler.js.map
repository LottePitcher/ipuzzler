{"version":3,"sources":["webpack://webpax/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://webpax/webpack/bootstrap","webpack://webpax/webpack/runtime/compat get default export","webpack://webpax/webpack/runtime/define property getters","webpack://webpax/webpack/runtime/global","webpack://webpax/webpack/runtime/hasOwnProperty shorthand","webpack://webpax/webpack/runtime/publicPath","webpack://webpax/./src/ipuzzler.js","webpack://webpax/./src/ipuzzler.scss"],"names":["module","exports","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","o","get","g","globalThis","this","Function","e","window","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","Error","replace","p","Clue","ipuzClueData","direction","toLowerCase","text","clue","number","enumeration","label","root","next","continuations","cells","toClueList","_","concat","toListItem","html","li","createElement","innerHTML","highlight","depth","forEach","cell","focusFirstInput","focus","focusFinalInput","Cell","x","y","ipuzCellData","position","span","className","previous","clues","style","barred","parseInt","insertAdjacentHTML","input","setAttribute","appendChild","isEndOfRange","test","classList","add","clearHighlight","remove","Puzzle","container","changeDirection","console","log","listCells","puzzle","drawClues","heading","div","ul","drawPuzzle","ipuz","map","row","ipuzCell","parseCells","cluesFromAcross","Across","c","parse","flat","cluesFromDown","Down","across","down","find","findCluePosition","push","parseClues","grid","layout","addEventListener","handleKeyPress","handleKeyDown","handleFocus","handleClick","gridTemplate","dimensions","height","width","innerWidth","handleWindowResize","findCluesForInput","clearHighlights","moveFocusToNextCell","event","target","moveFocusToPreviousCell","keyHandlers","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","handler","focusing","setTimeout","tagName","gridSize","getComputedStyle","fontSize","Math","ceil","querySelectorAll","clueFontSize","w","query","ipuzClue","continued","i","ipuzzler","selector","querySelector","load","url","success","failure","error","request","XMLHttpRequest","open","onload","data","status","JSON","responseText","send","search","split","token","pair"],"mappings":"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","file":"ipuzzler.js","sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","(function () {\r\n\r\n    function Clue(ipuzClueData, direction) {\r\n        this.direction = (direction || ipuzClueData.direction || \"\").toLowerCase();\r\n        if (ipuzClueData) {\r\n            this.text = ipuzClueData.clue || \"\";\r\n            this.number = ipuzClueData.number || 0;\r\n            this.enumeration = (ipuzClueData.enumeration || \"\").replace(/ /g, ',');\r\n            this.label = ipuzClueData.label || this.number;\r\n        }\r\n        this.root = null;\r\n        this.next = null;\r\n        this.continuations = [];\r\n        this.cells = [];\r\n        this.toClueList = _ => [this].concat(this.continuations);\r\n\r\n        this.toListItem = function () {\r\n            let html = `<a href=\"#\"><label>${this.label}</label>${this.text}`;\r\n            if (this.enumeration) html += ` <span>(${this.enumeration})</span>`;\r\n            html += \"</a>\";\r\n            const li = document.createElement('li');\r\n            li.innerHTML = html;\r\n            return (li);\r\n        }\r\n\r\n        this.highlight = function (depth = 0) {\r\n            if (depth == 0 && this.root) {\r\n                return this.root.highlight(depth + 1);\r\n            } else {\r\n                this.cells.forEach(cell => cell.highlight());\r\n                this.continuations.forEach(clue => clue.highlight(depth + 1));\r\n            }\r\n        }\r\n\r\n        this.focusFirstInput = function () {\r\n            this.cells[0].focus();\r\n        }\r\n\r\n        this.focusFinalInput = function () {\r\n            this.cells[this.cells.length - 1].focus();\r\n        }\r\n    }\r\n\r\n    Clue.parse = function (ipuzClue, direction) {\r\n        var clue = new Clue(ipuzClue, direction);\r\n        if (ipuzClue.continued && ipuzClue.continued.map) {\r\n            clue.continuations = ipuzClue.continued.map(c => ({ ...Clue.parse(c), text: `See ${ipuzClue.number}`, root: clue }));\r\n            clue.next = clue.continuations[0];\r\n            for (var i = 0; i < clue.continuations.length - 1; i++) clue.continuations[i].next = clue.continuations[i + 1];\r\n        }\r\n        return clue;\r\n    }\r\n\r\n    function Cell(x, y, ipuzCellData) {\r\n        this.position = { x: x, y: y };\r\n        this.span = document.createElement('span');\r\n        this.span.className = 'cell';\r\n        this.previous = {};\r\n        this.next = {};\r\n        this.clues = [];\r\n        if (ipuzCellData === null) {\r\n            this.span.className += \" null\";\r\n        } else {\r\n            this.style = ipuzCellData.style || {};\r\n            if (ipuzCellData.style && ipuzCellData.style.barred) this.span.className += ' barred-' + ipuzCellData.style.barred.toLowerCase();\r\n            this.value = (ipuzCellData.cell || ipuzCellData);\r\n            if (parseInt(this.value)) this.span.insertAdjacentHTML('afterbegin', `<span class=\"clue-number\">${this.value}</span>`);\r\n            if (this.value == '#') {\r\n                this.span.className += \" block\";\r\n            } else {\r\n                this.input = document.createElement('input');\r\n                this.input.setAttribute('maxlength', '1');\r\n                this.input.cell = this;\r\n                this.span.appendChild(this.input);\r\n            }\r\n        }\r\n\r\n        this.isEndOfRange = function (direction) {\r\n            if (!this.input) return (true);\r\n            if (direction == \"across\" && /L/i.test(this.style.barred)) return true;\r\n            if (direction == \"down\" && /T/i.test(this.style.barred)) return true;\r\n            return false;\r\n        }\r\n\r\n        this.highlight = () => this.span.classList.add('current-clue');\r\n        this.clearHighlight = () => this.span.classList.remove('current-clue');\r\n        this.focus = () => this.input.focus();\r\n    }\r\n\r\n    function Puzzle(container) {\r\n\r\n        this.direction = \"across\";\r\n\r\n        this.changeDirection = function (direction) {\r\n            console.log(\"changin direction!\");\r\n            if (direction) {\r\n                this.direction = direction;\r\n            } else {\r\n                this.direction = (this.direction == \"across\" ? \"down\" : \"across\");\r\n            }\r\n        }\r\n\r\n        const parseCells = (ipuz) => ipuz.puzzle.map((row, y) => row.map((ipuzCell, x) => new Cell(x, y, ipuzCell)));\r\n\r\n        const findCluePosition = function (clue) {\r\n            return puzzle.cells.flat().find(cell => cell.value == clue.number).position;\r\n        }\r\n\r\n        const parseClues = function (ipuz) {\r\n            let cluesFromAcross = ipuz.clues.Across.map(c => Clue.parse(c, \"across\").toClueList()).flat();\r\n            let cluesFromDown = ipuz.clues.Down.map(c => Clue.parse(c, \"down\").toClueList()).flat();\r\n            const clues = { across: [], down: [] };\r\n            cluesFromAcross.concat(cluesFromDown).forEach(clue => {\r\n                clue.position = findCluePosition(clue);\r\n                clue.cells = listCells(clue.position.x, clue.position.y, clue.direction);\r\n                clue.cells.forEach(cell => cell.clues.push(clue));\r\n                clues[clue.direction][clue.number] = clue;\r\n            });\r\n            return clues;\r\n        }\r\n\r\n        const listCells = function (x, y, direction, previous) {\r\n            if (y < 0 || x < 0 || y >= puzzle.cells.length || x >= puzzle.cells[y].length) return [];\r\n            var cell = puzzle.cells[y][x];\r\n            cell.previous[direction] = previous;\r\n            if (cell.isEndOfRange()) return [];\r\n            if (previous) previous.next[direction] = cell;\r\n            (direction == \"across\" ? x++ : y++);\r\n            return ([cell].concat(listCells(x, y, direction, cell)));\r\n        }\r\n\r\n        function drawGrid(cells) {\r\n            const grid = document.createElement('div');\r\n            grid.className = 'puzzle-grid';\r\n            cells.forEach(row => row.forEach(cell => grid.appendChild(cell.span)));\r\n            return (grid);\r\n        }\r\n\r\n        function drawClues(heading, clues) {\r\n            let div = document.createElement('div');\r\n            div.innerHTML = `<h2>${heading}</h2>`;\r\n            let ul = document.createElement(ul);\r\n            clues.forEach(clue => ul.appendChild(clue.toListItem()));\r\n            div.appendChild(ul);\r\n            return div;\r\n        }\r\n\r\n        this.drawPuzzle = function (ipuz) {\r\n            this.cells = parseCells(ipuz);\r\n            this.clues = parseClues(ipuz);\r\n            const layout = document.createElement('div');\r\n            layout.className = \"puzzle-layout\";\r\n            this.grid = drawGrid(this.cells);\r\n            layout.appendChild(this.grid);\r\n            layout.appendChild(drawClues(\"Across\", this.clues.across));\r\n            layout.appendChild(drawClues(\"Down\", this.clues.down));\r\n            container.appendChild(layout);\r\n\r\n            container.addEventListener(\"keypress\", this.handleKeyPress);\r\n            container.addEventListener(\"keydown\", this.handleKeyDown);\r\n            container.addEventListener(\"focusin\", this.handleFocus);\r\n            container.addEventListener(\"click\", this.handleClick);\r\n\r\n            this.grid.style.gridTemplate = `repeat(${ipuz.dimensions.height}, 1fr) / repeat(${ipuz.dimensions.width}, 1fr)`;\r\n            if (window.innerWidth > 768) {\r\n                this.grid.style.width = (ipuz.dimensions.width * 32) + \"px\";\r\n                this.grid.style.height = (ipuz.dimensions.height * 32) + \"px\";\r\n            }\r\n            this.handleWindowResize();\r\n        }\r\n\r\n        let puzzle = this;\r\n\r\n        this.findCluesForInput = function (input, direction) {\r\n            let cell = puzzle.cells.flat().find(cell => cell.input === input);\r\n            return cell.clues;\r\n        }\r\n\r\n        this.clearHighlights = function () {\r\n            puzzle.cells.flat().forEach(cell => cell.clearHighlight());\r\n        }\r\n\r\n        this.moveFocusToNextCell = function (direction = puzzle.direction) {\r\n            return (function(event) {\r\n                var cell = event.target.cell;\r\n                if (cell.next && cell.next[direction]) {\r\n                    puzzle.changeDirection(direction);\r\n                    cell.next[direction].focus();\r\n                } else {                    \r\n                    var clues = puzzle.findCluesForInput(event.target);\r\n                    var clue = clues.find(c => c.direction == direction);                    \r\n                    if (clue && clue.next) {\r\n                        puzzle.changeDirection(clue.next.direction);\r\n                        clue.next.focusFirstInput();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        this.moveFocusToPreviousCell = function (direction = puzzle.direction) {\r\n            return (function(event) {\r\n                var cell = event.target.cell;\r\n                if (cell.previous && cell.previous[direction]) {\r\n                    puzzle.changeDirection(direction);\r\n                    cell.previous[direction].focus();\r\n                }\r\n            });\r\n        }\r\n\r\n        this.focusFirstInput = function(event) {\r\n            let clues = puzzle.findCluesForInput(event.target);\r\n            let clue = clues.find(clue => clue.direction == puzzle.direction);\r\n            clue.focusFirstInput();\r\n        }\r\n\r\n        this.focusFinalInput = function(event) {\r\n            let clues = puzzle.findCluesForInput(event.target);\r\n            console.log(clues);\r\n            let clue = clues.find(clue => clue.direction == puzzle.direction);\r\n            clue.focusFinalInput();\r\n        }\r\n\r\n        this.keyHandlers = {\r\n            ArrowLeft: this.moveFocusToPreviousCell(\"across\"),\r\n            ArrowRight: this.moveFocusToNextCell(\"across\"),\r\n            ArrowUp: this.moveFocusToPreviousCell(\"down\"),\r\n            ArrowDown: this.moveFocusToNextCell(\"down\"),\r\n            Home: this.focusFirstInput,\r\n            End: this.focusFinalInput\r\n            // Backspace: function () { puzzle.cell.clear(); this.moveFocusToPreviousCell(); },\r\n            // Delete: function () { puzzle.cell.clear(); },\r\n            // Escape: function () { puzzle.input.blur(); }\r\n        }\r\n\r\n        this.handleKeyDown = function (event) {\r\n            var handler = puzzle.keyHandlers[event.key];\r\n            if (handler) return handler(event);\r\n        }\r\n\r\n        this.handleFocus = function (event) {\r\n            window.focusing = true;\r\n            puzzle.clearHighlights();\r\n            let clues = puzzle.findCluesForInput(event.target);\r\n            console.log(\"handleFocus\");\r\n            console.log(puzzle.direction);\r\n            let clue = clues.find(clue => clue.direction == puzzle.direction);\r\n            if (! clue) {\r\n                puzzle.changeDirection();\r\n                clue = clues.find(clue => clue.direction == puzzle.direction);\r\n            }            \r\n            clue.highlight();\r\n            window.setTimeout(() => window.focusing = false, 200);\r\n        }\r\n\r\n\r\n        this.handleKeyPress = function (event) {\r\n            console.log(event);\r\n            console.log(this);\r\n        }\r\n        this.handleClick = function (event) {\r\n            if (window.focusing || event.target.tagName != \"INPUT\") return;\r\n            let clues = puzzle.findCluesForInput(event.target);\r\n            if (clues.length > 1) puzzle.changeDirection();\r\n            puzzle.clearHighlights();\r\n            clues.find(clue => clue.direction == puzzle.direction).highlight();\r\n        }\r\n\r\n        this.handleWindowResize = function (event) {\r\n            if (!puzzle.grid) return;\r\n            let gridSize = parseInt(getComputedStyle(puzzle.grid, null).width.replace(\"px\", \"\"));\r\n            let fontSize = Math.ceil(gridSize / (2 * puzzle.cells[0].length));\r\n\r\n            // for sizes just under 16, we bump the size to 16px to prevent zooming on iOS when input is focused.\r\n            if (fontSize > 10 && fontSize < 16) fontSize = 16;\r\n            puzzle.grid.querySelectorAll(\"input\").forEach(input => input.style.fontSize = fontSize + \"px\");\r\n\r\n            let clueFontSize = (Math.ceil(gridSize / (3.5 * puzzle.cells[0].length)));\r\n            puzzle.grid.querySelectorAll(\"span.clue-number\").forEach(input => input.style.fontSize = clueFontSize + \"px\");\r\n        }\r\n\r\n        window.addEventListener(\"resize\", this.handleWindowResize);\r\n    }\r\n\r\n    function get(url, success, failure, error) {\r\n        var request = new XMLHttpRequest();\r\n        request.open('GET', url, true);\r\n        request.onload = function () {\r\n            if (request.status >= 200 && request.status < 400) {\r\n                success(JSON.parse(request.responseText));\r\n            } else {\r\n                if (failure) failure();\r\n            }\r\n        };\r\n        request.send();\r\n    }\r\n\r\n    let ipuzzler = function (selector) {\r\n        let puzzle = new Puzzle(document.querySelector(selector));\r\n        this.load = function (url) {\r\n            get(url, function (data) {\r\n                puzzle.drawPuzzle(data);\r\n            });\r\n        }\r\n        return (this);\r\n    }\r\n\r\n    window.ipuzzler = ipuzzler;\r\n\r\n    (function (w) {\r\n        let query = {};\r\n        let tokens = window.location.search.replace(/^\\?/, '').split('&');\r\n        tokens.forEach(token => {\r\n            let pair = token.split('=');\r\n            query[pair[0]] = pair[1];\r\n        });\r\n        w.query = query;\r\n    })(window);\r\n\r\n})();","export default __webpack_public_path__ + \"ipuzzler.css\";"],"sourceRoot":""}